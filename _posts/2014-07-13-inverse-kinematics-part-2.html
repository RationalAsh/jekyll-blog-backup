---
layout: post
title: 'Inverse Kinematics: Part 2'
date: '2014-07-13T17:57:00.000+05:30'
author: Ashwin Narayan
comments: true
tags:
- robotics
- inverse kinematics
- robotic arm
- technical
modified_time: '2015-10-05T16:10:31.703+05:30'
thumbnail: http://4.bp.blogspot.com/-6dV0EsVrqG8/U8J0IzqZpJI/AAAAAAAACEg/b9C1m9QOMBQ/s72-c/3RARM.png
blogger_id: tag:blogger.com,1999:blog-259194268438499485.post-2461170070175487918
blogger_orig_url: http://ashwinnarayan.blogspot.com/2014/07/inverse-kinematics-part-2.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;">On to part two of exploring inverse kinematics! This time I think I will add two additional degrees of freedom to the arm and calculate the inverse kinematics.&nbsp;</div><div style="text-align: justify;"><br /></div><div class="separator" style="clear: both; text-align: justify;"><a href="http://4.bp.blogspot.com/-6dV0EsVrqG8/U8J0IzqZpJI/AAAAAAAACEg/b9C1m9QOMBQ/s1600/3RARM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="352" src="http://4.bp.blogspot.com/-6dV0EsVrqG8/U8J0IzqZpJI/AAAAAAAACEg/b9C1m9QOMBQ/s1600/3RARM.png" width="640" /></a></div><div style="text-align: justify;">$l_1$ - Length of the first link</div><div style="text-align: justify;">$l_2$ - Length of the second link</div><div style="text-align: justify;">$l_3$ - Length of the third link</div><div style="text-align: justify;">$\theta_0$ - The angle of the base drum.</div><div style="text-align: justify;">$\theta_1$ - The angle of the first link from the ground</div><div style="text-align: justify;">$\theta_2$ - The angle of the second link w.r.t the first</div><div style="text-align: justify;">$\theta_3$ - The angle of the third link w.r.t the second</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">First let's ignore the third link and consider the two links plus the rotating base. This extension is relatively simple to handle. If the value of $\theta_0$ is found then the problem can again be reduced to a planar 2D problem which already has a nice solution.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">It's easy to see that:</div><div style="text-align: justify;">$\theta_0 = atan2(z, x)$</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Once this is found, then we can find the absolute distance in the x-z plane $d = \sqrt{x^2 + z^2}$. Then the inverse kinematics for the two links can be found by replacing $x$ with $d$ in all the equations.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Now it's time to add the third link into the equations. This third link is special. It's not <i>really</i>&nbsp;an additional degree of freedom. Two links and a rotating base are all that's needed to reach any point in 3D space. So why the third link? Imagine that there was a gripper attached to the third link. This gripper grabs a glass of water. If that third link were not there, this gripper would tilt with the angle of the second link and whatever liquid is in the glass would spill all over the place. This third link in the arm will adjust its angle to the second link so that it maintains a constant angle from the ground plane. Now if the arm is holding a glass of water and moving around, the glass will always be pointed in the right direction. It won't tilt and spill its contents all over the place. Let the constant angle between the third link and the ground be $\phi$ degrees. Applying this constraint we get: $\theta_3 = \theta_1 - \theta_2 - \phi$.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">So all we need to do is subtract the vector of the third link from the target coordinates, apply the 2-link plus base inverse kinematics on this coordinates and then calculate phi using the value of $\theta_1$ and $\theta_2$ that we get from those calculations.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">I've implemented all this in the invkin4() function in <a href="https://github.com/RationalAsh/invkin/blob/master/invkin.py">this python script</a>.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">I'll post a processing simulation of this soon. I'm still fiddling around with the P3D. I haven't got used to it yet.<br /><br />EDIT: <a href="https://rationalash.github.io/invkin/" target="_blank">Go here</a>&nbsp;to see a processing simulation of the inverse kinematics script. :D</div></div>
