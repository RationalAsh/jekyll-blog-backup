---
layout: post
title: Inverse Kinematics for 2DOF Arm
date: '2014-07-11T16:47:00.000+05:30'
author: Ashwin Narayan
comments: true
tags:
- robotics
- inverse kinematics
- robotic arm
- technical
modified_time: '2015-10-05T15:37:58.593+05:30'
thumbnail: http://2.bp.blogspot.com/-0U96P1LBNho/U7-3ouDVYWI/AAAAAAAACDw/If5OrvBZtj8/s72-c/2RManip.png
blogger_id: tag:blogger.com,1999:blog-259194268438499485.post-5584466581025621671
blogger_orig_url: http://ashwinnarayan.blogspot.com/2014/07/inverse-kinematics-for-2dof-arm.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;">When I first came across the problem of inverse kinematics I thought - quite naively - that it would be a simple matter to find a solution to the problem because the forward kinematics problem was so simple to solve. I decided to start out with a 2 link arm and see if I could work out the solution on my own from scratch without having any initial knowledge about inverse kinematics. After filling pages and pages with calculations that didn't quite seem to be going anywhere I realized why it was such a difficult problem.&nbsp;</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Of course a 2 link arm had a complete close form solution. After a bit of online research I found the solution. However, the solution for arms with more than 2 degrees of freedom turns out to be not so simple. It requires using numerical methods to slowly converge on a solution. This approach doesn't solve everything either. There's still the problem of choosing the right set of angles because there are often multiple solutions for a particular location of the end of the arm and some of these solutions are invalid because they are outside the range of motion of the motors at the joints of the arm.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">I've decided to slowly familiarize myself with all the different ways of finding inverse kinematics solutions. I think I'll make blogposts each with a higher degree of freedom and eventually I'll talk about the solution for the 6DOF arm. Why stop at 6? Because it turns out that in 3D space, you don't need more than 6DOF to reach a particular location/orientation. Any more than that and your arm becomes redundant. 3DOF for location in space plus 3DOF for orientation in space are all we need from an arm.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">So in this post I'll talk about the solution to 2 link robotic arm. And this arm will have hinge type joints only. I think that the technical term used is "revolute joint".<br /><br />A 2 link planar robotic arm looks like this:<br /><div class="separator" style="clear: both; text-align: center;"><a href="https://www.blogger.com/blogger.g?blogID=259194268438499485" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-0U96P1LBNho/U7-3ouDVYWI/AAAAAAAACDw/If5OrvBZtj8/s1600/2RManip.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="466" src="http://2.bp.blogspot.com/-0U96P1LBNho/U7-3ouDVYWI/AAAAAAAACDw/If5OrvBZtj8/s1600/2RManip.png" width="640" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"></div><br /></div><div style="text-align: justify;">The forward kinematics equations for this arrangement are simple enough.<br />$x = l_1 cos(\theta_1) + l_2 cos(\theta_1 + \theta_2)$<br />$y = l_1 sin(\theta_1) + l_2 sin(\theta_1 + \theta_2)$<br /><br />The inverse kinematics equations are quite monstrous. The full derivation is <a href="http://www.hessmer.org/uploads/RobotArm/Inverse%2520Kinematics%2520for%2520Robot%2520Arm.pdf" target="_blank">given in this fantastic pdf</a>. I'll just write down the final equations here.<br /><br />Given a value of x and y, the inverse kinematics equations are:<br />Let<br />$k_1 = l_1 + l_2 cos(\theta_2)$<br />$k_2 = l_2 sin(\theta_2)$<br />$\gamma = atan2(k_2, k_1)$<br /><br />$\theta_2 = atan2(\sqrt{1 - (\frac{x^2 + y^2 - l_1^2 - l_2^2}{2l_1 l_2})^2}, \frac{x^2 + y^2 - l_1^2 - l_2^2}{2l_1 l_2})$<br />$\theta_1 = atan2(y, x) - \gamma$<br /><br />I wrote a simple python script to calculate the values of theta. You can get the code <a href="https://github.com/RationalAsh/invkin/blob/master/invkin.py">here.</a>&nbsp;The invkin2() function calculates the values of $\theta_1$ and $\theta_2$ for an arm with 2 links.<br /><br />It was a bit difficult to test the code this way though. Can't see if I'm right or wrong in most cases. So I wrote this processing sketch to visualize the calculations so I can easily verify their correctness.<br /><br />You can view the processing simulation here:&nbsp;<a href="http://rationalash.github.io/invkin/">http://rationalash.github.io/invkin/</a><br /><br /></div><div style="text-align: justify;"><br /></div></div><script type="text/javascript">MathJax.Hub.Queue(["Typeset",MathJax.Hub]);</script></div>
